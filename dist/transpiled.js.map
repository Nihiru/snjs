{"version":3,"sources":["lib.js"],"names":["Mfa","json_obj","SFItem","ServerExtension","content","url","Component","window","componentData","disassociatedItemIds","associatedItemIds","hosted_url","local_url","offlineOnly","valid_until","Date","name","autoupdateDisabled","package_info","area","permissions","active","params","superParams","Object","assign","uuid","content_type","getAppDataItem","size","setAppDataItem","concat","associativeAreas","includes","item","push","indexOf","Editor","notes","data","default","systemEditor","references","_","map","note","find","pull","uuids","ref","forEach","remove","bind","newItem","oldUUID","newUUID","key","value","dataHasChanged","JSON","stringify","Action","json","merge","running","error","lastExecuted","Extension","actions","action","filter","context","description","supported_types","a","omit","Note","text","tags","title","addItemAsRelationship","savedTagsString","tag","Tag","arrayToDisplayString","filtered","dummy","slice","setIsNoLongerBeingReferencedBy","length","sort","b","i","join","Theme","EncryptedStorage","storage","e","console","log"],"mappings":"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","file":"transpiled.js","sourcesContent":["export class Mfa extends SFItem {\n\n  constructor(json_obj) {\n    super(json_obj);\n  }\n\n  // mapContentToLocalProperties(content) {\n  //   super.mapContentToLocalProperties(content)\n  //   this.serverContent = content;\n  // }\n  //\n  // structureParams() {\n  //   return _.merge(this.serverContent, super.structureParams());\n  // }\n\n  get content_type() {\n    return \"SF|MFA\";\n  }\n\n  doNotEncrypt() {\n    return true;\n  }\n\n}\n;export class ServerExtension extends SFItem {\n\n  mapContentToLocalProperties(content) {\n    super.mapContentToLocalProperties(content)\n    this.url = content.url;\n  }\n\n  get content_type() {\n    return \"SF|Extension\";\n  }\n\n  doNotEncrypt() {\n    return true;\n  }\n}\n;export class Component extends SFItem {\n\n  constructor(json_obj) {\n    // If making a copy of an existing component (usually during sign in if you have a component active in the session),\n    // which may have window set, you may get a cross-origin exception since you'll be trying to copy the window. So we clear it here.\n    json_obj.window = null;\n\n    super(json_obj);\n\n    if(!this.componentData) {\n      this.componentData = {};\n    }\n\n    if(!this.disassociatedItemIds) {\n      this.disassociatedItemIds = [];\n    }\n\n    if(!this.associatedItemIds) {\n      this.associatedItemIds = [];\n    }\n  }\n\n  mapContentToLocalProperties(content) {\n    super.mapContentToLocalProperties(content)\n    /* Legacy */\n    this.url = content.url || content.hosted_url;\n\n    /* New */\n    this.local_url = content.local_url;\n    this.hosted_url = content.hosted_url || content.url;\n    this.offlineOnly = content.offlineOnly;\n\n    if(content.valid_until) {\n      this.valid_until = new Date(content.valid_until);\n    }\n\n    this.name = content.name;\n    this.autoupdateDisabled = content.autoupdateDisabled;\n\n    this.package_info = content.package_info;\n\n    // the location in the view this component is located in. Valid values are currently tags-list, note-tags, and editor-stack`\n    this.area = content.area;\n\n    this.permissions = content.permissions;\n    if(!this.permissions) {\n      this.permissions = [];\n    }\n\n    this.active = content.active;\n\n    // custom data that a component can store in itself\n    this.componentData = content.componentData || {};\n\n    // items that have requested a component to be disabled in its context\n    this.disassociatedItemIds = content.disassociatedItemIds || [];\n\n    // items that have requested a component to be enabled in its context\n    this.associatedItemIds = content.associatedItemIds || [];\n  }\n\n  handleDeletedContent() {\n    super.handleDeletedContent();\n\n    this.active = false;\n  }\n\n  structureParams() {\n    var params = {\n      url: this.url,\n      hosted_url: this.hosted_url,\n      local_url: this.local_url,\n      valid_until: this.valid_until,\n      offlineOnly: this.offlineOnly,\n      name: this.name,\n      area: this.area,\n      package_info: this.package_info,\n      permissions: this.permissions,\n      active: this.active,\n      autoupdateDisabled: this.autoupdateDisabled,\n      componentData: this.componentData,\n      disassociatedItemIds: this.disassociatedItemIds,\n      associatedItemIds: this.associatedItemIds,\n    };\n\n    var superParams = super.structureParams();\n    Object.assign(superParams, params);\n    return superParams;\n  }\n\n  toJSON() {\n    return {uuid: this.uuid}\n  }\n\n  get content_type() {\n    return \"SN|Component\";\n  }\n\n  isEditor() {\n    return this.area == \"editor-editor\";\n  }\n\n  isTheme() {\n    return this.content_type == \"SN|Theme\" || this.area == \"themes\";\n  }\n\n  isDefaultEditor() {\n    return this.getAppDataItem(\"defaultEditor\") == true;\n  }\n\n  setLastSize(size) {\n    this.setAppDataItem(\"lastSize\", size);\n  }\n\n  getLastSize() {\n    return this.getAppDataItem(\"lastSize\");\n  }\n\n  keysToIgnoreWhenCheckingContentEquality() {\n    return [\"active\"].concat(super.keysToIgnoreWhenCheckingContentEquality());\n  }\n\n\n  /*\n    An associative component depends on being explicitly activated for a given item, compared to a dissaciative component,\n    which is enabled by default in areas unrelated to a certain item.\n   */\n   static associativeAreas() {\n     return [\"editor-editor\"];\n   }\n\n  isAssociative() {\n    return Component.associativeAreas().includes(this.area);\n  }\n\n  associateWithItem(item) {\n    this.associatedItemIds.push(item.uuid);\n  }\n\n  isExplicitlyEnabledForItem(item) {\n    return this.associatedItemIds.indexOf(item.uuid) !== -1;\n  }\n\n  isExplicitlyDisabledForItem(item) {\n    return this.disassociatedItemIds.indexOf(item.uuid) !== -1;\n  }\n}\n;export class Editor extends SFItem {\n\n  constructor(json_obj) {\n    super(json_obj);\n    if(!this.notes) {\n      this.notes = [];\n    }\n    if(!this.data) {\n      this.data = {};\n    }\n  }\n\n  mapContentToLocalProperties(content) {\n    super.mapContentToLocalProperties(content)\n    this.url = content.url;\n    this.name = content.name;\n    this.data = content.data || {};\n    this.default = content.default;\n    this.systemEditor = content.systemEditor;\n  }\n\n  structureParams() {\n    var params = {\n      url: this.url,\n      name: this.name,\n      data: this.data,\n      default: this.default,\n      systemEditor: this.systemEditor\n    };\n\n    var superParams = super.structureParams();\n    Object.assign(superParams, params);\n    return superParams;\n  }\n\n  referenceParams() {\n    var references = _.map(this.notes, function(note){\n      return {uuid: note.uuid, content_type: note.content_type};\n    })\n\n    return references;\n  }\n\n  addItemAsRelationship(item) {\n    if(item.content_type == \"Note\") {\n      if(!_.find(this.notes, item)) {\n        this.notes.push(item);\n      }\n    }\n    super.addItemAsRelationship(item);\n  }\n\n  removeItemAsRelationship(item) {\n    if(item.content_type == \"Note\") {\n      _.pull(this.notes, item);\n    }\n    super.removeItemAsRelationship(item);\n  }\n\n  removeAndDirtyAllRelationships() {\n    super.removeAndDirtyAllRelationships();\n    this.notes = [];\n  }\n\n  removeReferencesNotPresentIn(references) {\n    super.removeReferencesNotPresentIn(references);\n\n    var uuids = references.map(function(ref){return ref.uuid});\n    this.notes.forEach(function(note){\n      if(!uuids.includes(note.uuid)) {\n        _.remove(this.notes, {uuid: note.uuid});\n      }\n    }.bind(this))\n  }\n\n  potentialItemOfInterestHasChangedItsUUID(newItem, oldUUID, newUUID) {\n    if(newItem.content_type === \"Note\" && _.find(this.notes, {uuid: oldUUID})) {\n      _.remove(this.notes, {uuid: oldUUID});\n      this.notes.push(newItem);\n    }\n  }\n\n  toJSON() {\n    return {uuid: this.uuid}\n  }\n\n  get content_type() {\n    return \"SN|Editor\";\n  }\n\n  setData(key, value) {\n    var dataHasChanged = JSON.stringify(this.data[key]) !== JSON.stringify(value);\n    if(dataHasChanged) {\n      this.data[key] = value;\n      return true;\n    }\n    return false;\n  }\n\n  dataForKey(key) {\n    return this.data[key] || {};\n  }\n}\n;export class Action {\n  constructor(json) {\n    _.merge(this, json);\n    this.running = false; // in case running=true was synced with server since model is uploaded nondiscriminatory\n    this.error = false;\n    if(this.lastExecuted) {\n      // is string\n      this.lastExecuted = new Date(this.lastExecuted);\n    }\n  }\n}\n\nexport class Extension extends Component {\n  constructor(json) {\n      super(json);\n\n      if(json.actions) {\n        this.actions = json.actions.map(function(action){\n          return new Action(action);\n        })\n      }\n\n      if(!this.actions) {\n        this.actions = [];\n      }\n  }\n\n  actionsWithContextForItem(item) {\n    return this.actions.filter(function(action){\n      return action.context == item.content_type || action.context == \"Item\";\n    })\n  }\n\n  mapContentToLocalProperties(content) {\n    super.mapContentToLocalProperties(content)\n    this.description = content.description;\n\n    this.supported_types = content.supported_types;\n    if(content.actions) {\n      this.actions = content.actions.map(function(action){\n        return new Action(action);\n      })\n    }\n  }\n\n  get content_type() {\n    return \"Extension\";\n  }\n\n  structureParams() {\n    var params = {\n      description: this.description,\n      actions: this.actions.map((a) => {return _.omit(a, [\"subrows\", \"subactions\"])}),\n      supported_types: this.supported_types\n    };\n\n    var superParams = super.structureParams();\n    Object.assign(superParams, params);\n    return superParams;\n  }\n\n}\n;export class Note extends SFItem {\n\n  constructor(json_obj) {\n    super(json_obj);\n\n    if(!this.text) {\n      // Some external editors can't handle a null value for text.\n      // Notes created on mobile with no text have a null value for it,\n      // so we'll just set a default here.\n      this.text = \"\";\n    }\n\n    if(!this.tags) {\n      this.tags = [];\n    }\n  }\n\n  mapContentToLocalProperties(content) {\n    super.mapContentToLocalProperties(content)\n    this.title = content.title;\n    this.text = content.text;\n  }\n\n  structureParams() {\n    var params = {\n      title: this.title,\n      text: this.text\n    };\n\n    var superParams = super.structureParams();\n    Object.assign(superParams, params);\n    return superParams;\n  }\n\n  addItemAsRelationship(item) {\n    /*\n    Legacy.\n    Previously, note/tag relationships were bidirectional, however in some cases there\n    may be broken links such that a note has references to a tag and not vice versa.\n    Now, only tags contain references to notes. For old notes that may have references to tags,\n    we want to transfer them over to the tag.\n     */\n    if(item.content_type == \"Tag\") {\n      item.addItemAsRelationship(this);\n    }\n    super.addItemAsRelationship(item);\n  }\n\n  setIsBeingReferencedBy(item) {\n    super.setIsBeingReferencedBy(item);\n    this.savedTagsString = null;\n  }\n\n  setIsNoLongerBeingReferencedBy(item) {\n    super.setIsNoLongerBeingReferencedBy(item);\n    this.savedTagsString = null;\n  }\n\n  isBeingRemovedLocally() {\n    this.tags.forEach(function(tag){\n      _.remove(tag.notes, {uuid: this.uuid});\n    }.bind(this))\n    super.isBeingRemovedLocally();\n  }\n\n  static filterDummyNotes(notes) {\n    var filtered = notes.filter(function(note){return note.dummy == false || note.dummy == null});\n    return filtered;\n  }\n\n  informReferencesOfUUIDChange(oldUUID, newUUID) {\n    super.informReferencesOfUUIDChange();\n    for(var tag of this.tags) {\n      _.remove(tag.notes, {uuid: oldUUID});\n      tag.notes.push(this);\n    }\n  }\n\n  safeText() {\n    return this.text || \"\";\n  }\n\n  safeTitle() {\n    return this.title || \"\";\n  }\n\n  toJSON() {\n    return {uuid: this.uuid}\n  }\n\n  get content_type() {\n    return \"Note\";\n  }\n\n  tagsString() {\n    this.savedTagsString = Tag.arrayToDisplayString(this.tags);\n    return this.savedTagsString;\n  }\n}\n;export class Tag extends SFItem {\n\n  constructor(json_obj) {\n    super(json_obj);\n\n    if(!this.notes) {\n      this.notes = [];\n    }\n  }\n\n  mapContentToLocalProperties(content) {\n    super.mapContentToLocalProperties(content)\n    this.title = content.title;\n  }\n\n  structureParams() {\n    var params = {\n      title: this.title\n    };\n\n    var superParams = super.structureParams();\n    Object.assign(superParams, params);\n    return superParams;\n  }\n\n  addItemAsRelationship(item) {\n    if(item.content_type == \"Note\") {\n      if(!_.find(this.notes, {uuid: item.uuid})) {\n        this.notes.push(item);\n        item.tags.push(this);\n      }\n    }\n    super.addItemAsRelationship(item);\n  }\n\n  removeItemAsRelationship(item) {\n    if(item.content_type == \"Note\") {\n      _.remove(this.notes, {uuid: item.uuid});\n      _.remove(item.tags, {uuid: this.uuid});\n    }\n    super.removeItemAsRelationship(item);\n  }\n\n  updateLocalRelationships() {\n    var references = this.content.references;\n\n    var uuids = references.map(function(ref){return ref.uuid});\n    this.notes.slice().forEach(function(note){\n      if(!uuids.includes(note.uuid)) {\n        _.remove(note.tags, {uuid: this.uuid});\n        _.remove(this.notes, {uuid: note.uuid});\n\n        note.setIsNoLongerBeingReferencedBy(this);\n      }\n    }.bind(this))\n  }\n\n  isBeingRemovedLocally() {\n    this.notes.forEach((note) => {\n      _.remove(note.tags, {uuid: this.uuid});\n      note.setIsNoLongerBeingReferencedBy(this);\n    })\n\n    this.notes.length = 0;\n\n    super.isBeingRemovedLocally();\n  }\n\n  informReferencesOfUUIDChange(oldUUID, newUUID) {\n    for(var note of this.notes) {\n      _.remove(note.tags, {uuid: oldUUID});\n      note.tags.push(this);\n    }\n  }\n\n  get content_type() {\n    return \"Tag\";\n  }\n\n  static arrayToDisplayString(tags) {\n    return tags.sort((a, b) => {return a.title > b.title}).map(function(tag, i){\n      return \"#\" + tag.title;\n    }).join(\" \");\n  }\n}\n;export class Theme extends Component {\n\n  constructor(json_obj) {\n    super(json_obj);\n    this.area = \"themes\";\n  }\n\n  get content_type() {\n    return \"SN|Theme\";\n  }\n}\n;export class EncryptedStorage extends SFItem {\n\n  mapContentToLocalProperties(content) {\n    super.mapContentToLocalProperties(content)\n    this.storage = content.storage;\n  }\n\n  get content_type() {\n    return \"SN|EncryptedStorage\";\n  }\n\n}\n;if(typeof window !== 'undefined' && window !== null) {\n  // window is for some reason defined in React Native, but throws an exception when you try to set to it\n  try {\n    window.Note = Note;\n    window.Tag = Tag;\n    window.Mfa = Mfa;\n    window.ServerExtension = ServerExtension;\n    window.Component = Component;\n    window.Editor = Editor;\n    window.Extension = Extension;\n    window.Theme = Theme;\n    window.EncryptedStorage = EncryptedStorage;\n  } catch (e) {\n    console.log(\"Exception while exporting window variables\", e);\n  }\n}\n"]}